<h1>Javascript 공부 2주차 피드백</h1>

<h2>1. 실행 컨텍스트(Execution Context)</h2>
<h3>1.1실행 컨텍스트의 개념</h3>
<p>scope, hosting, this, function, closure 등의 동작원리를 담고 있는 자바스크립트의 핵심원리. ECMAScript 스펙에 따르면 실행 컨텍스트를 실행 가능한 코드를 형상화하고 구분하는 추상적인 개념이라고 정의한다. 즉 실행 컨텍스트는 실행 가능한 코드가 실행되기 위해 필요한 환경이라고 할 수 있다.여기서 말하는 실행 가능한 코드는 아래와 같다.</p>

<ul>
<li>전역 실행 컨텍스트 : 전역 영역에 존재하는 코드</li>
<li>Eval 실행 컨텍스트 : eval 함수로 실행되는 코드</li>
<li>함수 실행 컨텍스트 : 함수 내에 존재하는 코드</li>
</ul>

<h3>1.2 실행 가능한 코드</h3>
<h4>Global Execution Context (전역 실행 컨텍스트)</h4>
<p>가장 먼저 콜스택에 올라가는 EC이다. 전역 EC는 다른 EC와 달리 argument 객체가 없으며 전역 객체 하나만 포함하는 스코프 체인과 this가 있다.그리고 전역 EC는  
script  태그를 마주치면, 생성된다. </p>

<h4>Functional Execution Context (함수 실행 컨텍스트)</h4>
<p>함수가 호출될 때마다 생성되는 EC로 arguments 와 스코프 체인, this 가 있다.</p>

<h4>Eval Function Execution Context (Eval 실행 컨텍스트)</h4>
<p>eval() 함수를 실행해서 만들어진 EC를 말한다.</p>

<p> 일반적으로 실행가능한 코드는 전역코드와 함수 내 코드이다. 자바스크립트 엔진은 코드를 실행하기 위하여 실행에 필요한 여러가지 정보를 알고 있어야 한다. 실행에 필요한 여러가지 정보란 아래와 같은 것들이 있다.</p>

<ul>
<li>변수 : 전역변수, 지역변수. 매개변수, 객체의 프로퍼티.</li>
<li>함수 선언</li>
<li>변수의 유효범위(scope)</li>
<li>this</li>
</ul>

```javascript
var x = 'xxx';

function foo () {
  var y = 'yyy';

  function bar () {
    var z = 'zzz';
    console.log(x + y + z);
  }
  bar();
}
foo();
```



<p>위 코드를 실행하면 아래와 같이 실행 컨텍스트 스택(stack)이 생성하고 소멸한다. 현재 실행중인 컨텍스트에서 이 컨텍스트와 관련없는 코드가 실행되면 새로운 컨텍스트가 생성된다. 이 컨텍스트는 스택에 쌓이게 되고 컨트롤(제어권)이 이동한다. </p>

<p>위 코드의 실행 컨텍스트 스택을 그림으로 나타내면 다음과 같다.</p>
<img src="ec_1.png"/>

<ol>
    <li>컨트롤이 실행가능한 코드로 이동하면 논리적 스택 구조를 가지는 새로운 실행 컨텍스트 스택이 생성된다. </li>
    <li>전역 코드(Global code)로 컨트롤이 진입하면 전역 실행 컨텍스트가 생성되고 실행 컨텍스트 스택에 쌓인다. 전역 실행 컨텍스트는 애플리케이션이 종료될 때(웹 페이지에서 나가거나 브라우저를 닫을 때)까지 유지된다.</li>
    <li>함수를 호출하면 해당 함수의 실행 컨텍스트가 생성되며 직전에 실행된 코드 블록의 실행 컨텍스트 위에 쌓인다.</li>
    <li>함수 실행이 끝나면 해당 함수의 실행 컨텍스트를 파기하고 직전의 실행 컨텍스트에 컨트롤을 반환한다.</li>
</ol>

<h3>1.3실행컨텍스트는 어떻게 생성되는가?</h3>
<p>Creation phase(생성 단계) 와 Execution phase(실행 단계) 를 거치며 생성.</p>

<b>Creation phase</b>
<pre>
생성 단계는 JS 엔진이 함수를 호출했지만 실행이 시작되지 않은 단계로 생성 단계에서 JS 엔진은 컴파일 단계에 있으며 코드를 컴파일하기 위해 (함수를) 스캔한다.
</pre>

<p>생성 단계(Creation phase)에서 EC가 생성되면, 엔진은 해당 컨텍스트에서 실행에 필요한 여러 가지 정보를 담을 객체를 생성한다. 그리고 이를 활성 객체(변수 객체)라고 한다. 즉 <b>EC 안에 활성 객체가 있고 그 안에 아래의 값들이 있는 것</b>이다.</p>

<ol>
    <li>스코프 체인</li>
    <li>argument 객체 생성</li>
    <li>변수의 생성(할당 말고)</li>
    <li>this의 바인딩</li>
</ol>

<p>그리고 이것들은 컴파일 과정을 거치며 만들어진다. 즉 생성 단계는 컴파일레이션 과정과 같고, EC는 컴파일레이션의 단위이다.</p>


<p>컴파일 단위를 거치며 활성된 객체를 코드와 그림으로 알아보면 다음과 같다.</p>

```javascript
function execute(param1, param2) {
  var a = 1, b = 2;
  function func() {
    return a+b;
  }
  return param1 + param2 + func();
}

execute(3, 4); // 실행 시
```
<p>execute(3, 4) 를 실행했을 때, EC가 생성 단계를 거치고 난 후의 모습은 다음과 같다.</p>

<img src="./ec_1.png"/>

<b>Execution phase</b>
<p>
앞서 선언한 변수에 모두 할당을 하고, 코드를 실행하는 단계이다.
</p>

